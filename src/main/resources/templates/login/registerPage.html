<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../css/formPage.css">
    <script type="text/javascript" src="../js/jquery-3.6.0.js"></script>
</head>
<body>
<div align="center">
    <form action="/login/userRegister" method="get" id="register_form">
        <table style="width: 500px;height: 180px">
            <tr>
                <td align="center">
                    账号:
                </td>
                <td align="left">
                    <input type="text" name="username" id="username" placeholder="请输入账号"/>
                </td>
            </tr>
            <tr>
                <td align="center">
                    密码:
                </td>
                <td align="left">
                    <input type="password" name="password" id="password" placeholder="请输入密码"/>
                </td>
            </tr>
            <tr>
                <td>
                    确认密码:
                </td>
                <td align="left">
                    <input type="password" id="password2" placeholder="请再次输入密码"/>
                </td>
            </tr>
            <tr>
                <td align="center">
                    email:
                </td>
                <td align="left">
                    <input type="text" name="email" id="email" placeholder="请输入邮箱"/>
                </td>
            </tr><!--
		        <tr>
		            <td>
		                用户权限:
		            </td>
		            <td>
		                <select id="power" name="power">
		                    <option selected value="user">普通用户</option>
		                    <option value="admin">管理员</option>
		                </select>
		            </td>
		        </tr> -->
            <tr>
                <td align="center" colspan="2">
                    <button id="register" type="button" style="width: 80%;">立即注册</button>
                </td>
            </tr>
            <script type="text/javascript" th:inline="javascript">
                $("#register").click(function(){
                    var register_form = $("#register_form");
                    var username = $("#username").val().trim();
                    var password = $("#password").val().trim();
                    var password2 = $("#password2").val().trim();
                    var email = $("#email").val().trim();
                    var emailRegExp = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
                    var email_ok = emailRegExp.test(email);
                    if(username === ""){
                        alert("请输入用户名")
                    }else if(password === ""){
                        alert("请输入密码");
                    }else if(password2 === ""){
                        alert("请再次输入密码");
                    }else if(password != password2){
                        alert("两次密码不同，请重新输入")
                    }else if(email === ""){
                        alert("请输入邮箱");
                    }else if(!email_ok){
                        alert("邮箱地址不合法，请重新输入")
                    }else{
                        register_form.submit();
                    }
                })
            </script>
        </table>
    </form>
</div>
</body>
</html>
